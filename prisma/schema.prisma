// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

enum MediaType {
    MOVIE
    TV_SHOW
}

enum Status {
    WATCHING
    WATCHED
    WANT_TO_WATCH
}

model Genre {
    id    Int     @id @default(autoincrement())
    name  String  @unique
    Media Media[]
}

model Media {
    id           Int         @id @default(autoincrement())
    title        String
    media_type   MediaType
    last_updated DateTime    @default(now())
    poster_path  String
    genres       Genre[]
    UserMedia    UserMedia[]
}

model UserMedia {
    user_id  String
    media_id Int
    status   Status
    order    Int

    Media Media @relation(fields: [media_id], references: [id])

    @@unique([user_id, media_id])
}
